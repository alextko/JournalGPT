"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[336],{3214:function(e,i,t){t.r(i),t.d(i,{OrganizationSwitcher:function(){return S}});var o=t(2903),n=t(8147),r=t(2425),a=t(3476),c=t(5064),s=t(8251),l=t(2784),g=t(3979),d=t(3244),p=t(3033),z=t(3736),u=t(9820);const m=e=>{const{onCreateOrganizationClick:i,onPersonalWorkspaceClick:t,onOrganizationClick:n}=e,{organizationList:s}=(0,r.useCoreOrganizationList)(),{organization:l}=(0,r.useCoreOrganization)(),g=(0,r.useCoreUser)(),{hidePersonal:d}=(0,r.useOrganizationSwitcherContext)(),z=(s||[]).map((e=>e.organization)).filter((e=>e.id!==(null==l?void 0:l.id))),m=(0,o.tZ)(c.Action,{elementDescriptor:a.descriptors.organizationSwitcherPopoverActionButton,elementId:a.descriptors.organizationSwitcherPopoverActionButton.setId("createOrganization"),iconBoxElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonIconBox,iconBoxElementId:a.descriptors.organizationSwitcherPopoverActionButtonIconBox.setId("createOrganization"),iconElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonIcon,iconElementId:a.descriptors.organizationSwitcherPopoverActionButtonIcon.setId("createOrganization"),textElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonText,textElementId:a.descriptors.organizationSwitcherPopoverActionButtonText.setId("createOrganization"),icon:p.v3,label:(0,a.localizationKeys)("organizationSwitcher.action__createOrganization"),onClick:i});return(0,o.BX)(c.SecondaryActions,{elementDescriptor:a.descriptors.organizationSwitcherPopoverActions,children:[(0,o.BX)(a.Box,{sx:e=>({maxHeight:`calc(4 * ${e.sizes.$12})`,overflowY:"auto",...u.common.unstyledScrollbar(e)}),children:[l&&!d&&(0,o.tZ)(c.PreviewButton,{elementDescriptor:a.descriptors.organizationSwitcherPreviewButton,icon:p.oX,sx:{borderRadius:0},onClick:t,children:(0,o.tZ)(c.PersonalWorkspacePreview,{user:g,size:"sm",avatarSx:e=>({margin:`0 calc(${e.space.$3}/2)`}),title:(0,a.localizationKeys)("organizationSwitcher.personalWorkspace")})}),z.map((e=>(0,o.tZ)(c.PreviewButton,{elementDescriptor:a.descriptors.organizationSwitcherPreviewButton,icon:p.oX,sx:{borderRadius:0},onClick:()=>n(e),children:(0,o.tZ)(c.OrganizationPreview,{elementId:"organizationSwitcher",avatarSx:e=>({margin:`0 calc(${e.space.$3}/2)`}),organization:e,size:"sm"})},e.id)))]}),m]})},h=l.forwardRef(((e,i)=>{const{close:t,...n}=e,s=(0,c.useCardState)(),{openOrganizationProfile:l,openCreateOrganization:u}=(0,r.useCoreClerk)(),{organization:h}=(0,r.useCoreOrganization)(),{isLoaded:v,setActive:w}=(0,r.useCoreOrganizationList)(),S=(0,z.useRouter)(),{hidePersonal:P,__unstable_manageBillingUrl:B,__unstable_manageBillingLabel:C,__unstable_manageBillingMembersLimit:O,createOrganizationMode:f,organizationProfileMode:x,afterLeaveOrganizationUrl:I,afterCreateOrganizationUrl:_,navigateCreateOrganization:k,navigateOrganizationProfile:A,navigateAfterSwitchOrganization:b}=(0,r.useOrganizationSwitcherContext)(),Z=(0,r.useCoreUser)();if(!v)return null;const y=(0,o.tZ)(c.Action,{elementDescriptor:a.descriptors.organizationSwitcherPopoverActionButton,elementId:a.descriptors.organizationSwitcherPopoverActionButton.setId("manageOrganization"),iconBoxElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonIconBox,iconBoxElementId:a.descriptors.organizationSwitcherPopoverActionButtonIconBox.setId("manageOrganization"),iconElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonIcon,iconElementId:a.descriptors.organizationSwitcherPopoverActionButtonIcon.setId("manageOrganization"),textElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonText,textElementId:a.descriptors.organizationSwitcherPopoverActionButtonText.setId("manageOrganization"),icon:p.tc,label:(0,a.localizationKeys)("organizationSwitcher.action__manageOrganization"),onClick:()=>(t(),"navigation"===x?A():l({afterLeaveOrganizationUrl:I,__unstable_manageBillingUrl:B,__unstable_manageBillingLabel:C,__unstable_manageBillingMembersLimit:O}))}),D=(0,o.tZ)(c.Action,{icon:p.Nj,label:(0,g.OR)(C)||"Manage billing",onClick:()=>S.navigate((0,g.OR)(B))});return(0,o.tZ)(d.r,{elementDescriptor:a.descriptors.organizationSwitcherPopoverRootBox,children:(0,o.BX)(c.PopoverCard.Root,{elementDescriptor:a.descriptors.organizationSwitcherPopoverCard,ref:i,...n,children:[(0,o.BX)(c.PopoverCard.Main,{elementDescriptor:a.descriptors.organizationSwitcherPopoverMain,children:[h?(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.OrganizationPreview,{elementId:"organizationSwitcher",gap:4,organization:h,user:Z,sx:e=>i=>({padding:`0 ${e.space.$6}`,marginBottom:i.space.$2})}),(0,o.BX)(c.Actions,{children:[y,B&&D]})]}):!P&&(0,o.tZ)(c.PersonalWorkspacePreview,{gap:4,user:Z,sx:e=>({padding:`0 ${e.space.$6}`,marginBottom:e.space.$6}),title:(0,a.localizationKeys)("organizationSwitcher.personalWorkspace")}),(0,o.tZ)(m,{onCreateOrganizationClick:()=>(t(),"navigation"===f?k():u({afterCreateOrganizationUrl:_})),onPersonalWorkspaceClick:()=>s.runAsync((()=>w({organization:null,beforeEmit:b}))).then(t),onOrganizationClick:e=>s.runAsync((()=>w({organization:e,beforeEmit:b}))).then(t)})]}),(0,o.tZ)(c.PopoverCard.Footer,{elementDescriptor:a.descriptors.organizationSwitcherPopoverFooter})]})})})),v=(0,c.withAvatarShimmer)((0,l.forwardRef)(((e,i)=>{const{sx:t,...n}=e,s=(0,r.useCoreUser)(),{organization:l}=(0,r.useCoreOrganization)(),{hidePersonal:g}=(0,r.useOrganizationSwitcherContext)();return(0,o.BX)(a.Button,{elementDescriptor:a.descriptors.organizationSwitcherTrigger,variant:"ghost",colorScheme:"neutral",sx:[e=>({minHeight:0,padding:`0 ${e.space.$2} 0 0`}),t],ref:i,...n,children:[l&&(0,o.tZ)(c.OrganizationPreview,{elementId:"organizationSwitcher",gap:3,size:"sm",organization:l,sx:{maxWidth:"30ch"}}),!l&&(0,o.tZ)(c.PersonalWorkspacePreview,{size:"sm",gap:3,user:s,title:g?(0,a.localizationKeys)("organizationSwitcher.notSelected"):(0,a.localizationKeys)("organizationSwitcher.personalWorkspace")}),(0,o.tZ)(a.Icon,{elementDescriptor:a.descriptors.organizationSwitcherTriggerIcon,icon:p.Qf,sx:e=>({opacity:e.opacity.$sm,marginLeft:`${e.space.$2}`})})]})}))),w=(0,c.withFloatingTree)((()=>{const{floating:e,reference:i,styles:t,toggle:n,isOpen:r,nodeId:l,context:g}=(0,s.Sv)({placement:"bottom-start",offset:8});return(0,o.BX)(a.Flow.Root,{flow:"organizationSwitcher",children:[(0,o.tZ)(v,{ref:i,onClick:n,isOpen:r}),(0,o.tZ)(c.Popover,{nodeId:l,context:g,isOpen:r,children:(0,o.tZ)(h,{close:n,ref:e,style:{...t}})})]})})),S=(0,n.pK)((0,r.withCoreUserGuard)((0,c.withCardStateProvider)(w)),"OrganizationSwitcher",{mode:"hide"})},4781:function(e,i,t){t.d(i,{v:function(){return o}});const o=({signUp:e,verifyEmailPath:i,verifyPhonePath:t,navigate:o,handleComplete:n,redirectUrl:r="",redirectUrlComplete:a=""})=>{var c,s;if("complete"===e.status)return n&&n();if("missing_requirements"===e.status){if(e.missingFields.some((e=>"saml"===e)))return e.authenticateWithRedirect({strategy:"saml",redirectUrl:r,redirectUrlComplete:a,continueSignUp:!0});if((null===(c=e.unverifiedFields)||void 0===c?void 0:c.includes("email_address"))&&i)return o(i);if((null===(s=e.unverifiedFields)||void 0===s?void 0:s.includes("phone_number"))&&t)return o(t)}}}}]);